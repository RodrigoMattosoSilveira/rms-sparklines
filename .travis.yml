language: node_js
node_js:
- 10.15.3
dist: trusty
sudo: required
addons:
  chrome: stable
git:
  quiet: true
  submodules: false
branches:
  only:
  - issue-44-ng7-tag
before_install:
- echo "before_install steps"
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
install:
- echo "install execution"
- npm install -g @angular/cli@7.3.9
before_script:
- echo "before_script execution"
- npm install
script:
- echo "script execution"
- ng build library
- ng build living-style-guide
- ng test library --karmaConfig=./projects/living-style-guide/karma.conf.travisci.js
- ng test living-style-guide --karmaConfig=./projects/library/karma.conf.travisci.js
- ng e2e
before_cache:
- echo "before_cache has no steps"
cache:
- npm
before_deploy:
- echo "before_deploy steps"
- "./scripts/tag.sh"
deploy:
  skip_cleanup: true
  local_dir: "./dist/living-styleguide"
  provider: pages
  github_token: "$GITHUB_TOKEN"
  keep_history: true
  on:
    branch: issue-44-ng7-tag
after_deploy:
- echo "after_deploy has no steps"
after_script:
- echo "after_script has no steps"
env:
  global:
    secure: ET4b4fIUxBE/9j9lexz4u4vFswBtA7kMGZGuYuhqcFYTZa+q2/YNW+RtH5eIOaqfilk+nZchtP12N5t5JMeQa7ST+fGYrCTz03bHRAjEtjb/z3b73mKZc585tIxflWDFX95hUMG9HkQG/qrsg2ZlBMmKbFa+DiQTgTw2J8qcNVy9D6//oIZDuCfbUplgSZPJVCqjLPmXkLaj1XNI9iIIs+cdyy9/mORnURNz3yzSStnizO/u1f6f9L/jwG8M5/0n2nITDSfTExLdcB1hkGdLPcOM7zeOfT0xBDkk28Xbnm0Xtpu1xfGOactuDFFhiCmrPL9t1imsXzXQJbHi1tMvIiy7pz9Rowksw2yaHMch3VyUpIxtWB6UfTzqOHRcbOiUnsCJpWTt9xEUidBmRId/PWUqDMxT/2eXEFK/Hwb3t2hUtl4Hbt5wEziElxmzAQCb5pcYtN5qlOO/ZnSUg3UAVFDbImBUiAVnCM70CPnxvRZTb/F9OegeZl8rRrFCHacrq9kZbJ8a9P+LU/1dSXaKDsLz0aAxtomoDYYQhBna3wlpG9DjpnrGgWtduG0TAElYNBE8RqOCOa8HKHPsp81ojUoy6ZUJkIflLviPpsid9mO4Pwx/BiuyVkWGQEPybKvBI8/Oi02sChVIhGNV2C4YAqwrtLri17eF2Nvsvu9aL0E=
